<!DOCTYPE html>
<html>
<head>
        <link rel="stylesheet" type="text/css" href="sytle.css">
</head>
<body>
        <h1>5ì›”Dreamhack CTF Season 5 Round #10 pharmacy Write-Up</h1>
</body>
<br>
<br>
</html>

ì´ë²ˆ CTFì—ì„œë„ Web ë¬¸ì œì¸ Dreamhack CTF Season 5 Round #10 (ğŸŒ±Div2)ì— pharmacyë¥¼ í’€ì–´ë³´ì•˜ë‹¤.
![image](https://github.com/teatree32/writeup/assets/164837312/48715c36-a1bf-4414-a1e9-0fccfca4fa5b)

ìš°ì„  ë¬¸ì œë¥¼ ë‹¤ìš´ë°›ê³  ì••ì¶•ì„ í’€ì–´ë³´ì.
![image](https://github.com/teatree32/writeup/assets/164837312/4d1bf3d9-7f3c-405d-a03f-a056987dc30a)

ì¼ë‹¨ íŒŒì¼ë“¤ì„ ì—´ì–´ë³´ë©´ í˜•íƒœëŠ” ìœ„ì™€ ê°™ë‹¤. ê°ê°ì˜ íŒŒì¼ë“¤ì´ ë¬´ì—‡ì¸ì§€ ìƒê°í•´ë³´ì.

Dockerfile : ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” íŒŒì¼ì´ë‹¤.

deploy/run.sh : í”Œë ˆê·¸ê°€ ë‚˜íƒ€ë‚˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì¸ê²ƒ ê°™ë‹¤.

deploy/flag : í…ìŠ¤íŠ¸ ë¬¸ì„œì¸ë° ì •í™•íˆ ë­”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ flagë¥¼ ì–»ëŠ”ë° í•„ìš”í•œ íŒŒì¼ ê°™ë‹¤.

deploy/src/supermarket : ì½”ë“œë¥¼ ë³´ë©´ íŠ¹ì • ì‘ì—…ì´ ëë‚˜ë©´ ì‹¤í–‰ë˜ëŠ” íŒŒì¼ê°™ë‹¤.

deploy/src/style : ì‹¤ì œ ì›¹ ì‚¬ì´íŠ¸ì—ì„œ ë³´ì´ëŠ” ìŠ¤íƒ€ì¼ ì‹œíŠ¸ íŒŒì¼ì´ë‹¤.

deploy/src/index : parmacy ì›¹ ì‚¬ì´íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ê³  ìˆëŠ” íŒŒì¼ë¡œ ì²˜ë°©ì „ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆë„ë¡ ì½”ë“œê°€ ë§Œë“¤ì–´ì ¸ ìˆëŠ”ê²ƒ ê°™ë‹¤.

deploy/src/uploads/placeholder : ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ë•Œ í•„ìš”í•œ íŒŒì¼ ê°™ë‹¤.

ê·¸ëŸ¼ íŒŒì¼ì„ í•˜ë‚˜í•˜ë‚˜ ë¶„ì„í•´ ë³´ì. ë¨¼ì € Dockerfile íŒŒì¼ ì½”ë“œë¥¼ í•´ì„í•´ë³´ê² ë‹¤.

![image](https://github.com/teatree32/writeup/assets/164837312/01020f3f-7471-410c-b10d-66e348c39b47)

4ì›”ë‹¬ CTFì—ì„œ ê³µë¶€í•´ë³¸ ë‚´ìš©ê³¼ ê²¹ì¹˜ëŠ” ë‚´ìš©ì´ ìˆì§€ë§Œ chmod 777 ì€ ì²˜ìŒ ë³´ëŠ” ì½”ë“œë¼ì„œ ê²€ìƒ‰í•´ ë³´ì•˜ë‹¤.
íŒŒì¼ ì‚¬ìš© ê¶Œí•œì€ ìˆ«ì ë˜ëŠ” ê¸°í˜¸ í˜•ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ”ë° r(ì½ê¸°) = 4, w(ì“°ê¸°) = 2, x(ìˆ«ì) = 1ì„ ì˜ë¯¸í•œë‹¤. ì´ë•Œ 7ì€ 4+2+1ë¡œ ì½ê¸° ì“°ê¸° ë° ì‹¤í–‰ê¶Œí•œì„ ê°€ì§€ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

í’€ì´ : php:7.3-apache ì´ë¯¸ì§€ì—ì„œ ì‹œì‘í•´ ./deploy/run.sh/usr/svin/ ê²½ë¡œì— ìˆëŠ” íŒŒì¼ì„ ê°€ì ¸ì˜¤ê³  ìƒˆë¡œìš´ ë ˆì´ì–´ì—ì„œ /usr/sbin/run.sh ì‹¤í–‰ê¶Œí•œì„ ì¶”ê°€í•œë‹¤. ê·¸ë¦¬ê³  ./deploy/src/var/www/html íŒŒì¼ì„ ê°€ì ¸ì˜¤ê³  ìƒˆë¡œìš´ ë ˆì´ì–´ì—ì„œ /var/www/html/uploads ì½ê¸° ì“°ê¸° ë° ì‹¤í–‰ê¶Œí•œì„ ì¶”ê°€í•œë‹¤. ì´ì–´ì„œ 80í¬íŠ¸ë¡œ ì´ë¯¸ì§€ë¥¼ ì—´ê³  /usr/sbin/run.shì„ ì‹¤í–‰í•œë‹¤.

ì´ì–´ì„œ run.shì„ ì‚´í´ë³´ì.

![image](https://github.com/teatree32/writeup/assets/164837312/cf74bc1d-deb8-44ec-b1a5-2d6412370e92).

4ì›”ë‹¬ CTFì—ì„œ ë³¸ run.shì™€ ê°™ì€ ê²ƒì„ ì•Œ ìˆ˜ ìˆëŠ”ë° ì•„ì§ë„ export ëª…ë ¹ì–´ë¥¼ í†µí•´ ì§€ì—­ë³€ìˆ˜ë¥¼ ì „ì—­ë³€ìˆ˜ë¡œ ë§Œë“œëŠ” ì´ìœ ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤.

ë‹¤ìŒìœ¼ë¡œ flag íŒŒì¼ì„ ì‚´í´ë³´ì.

![image](https://github.com/teatree32/writeup/assets/164837312/75712750-cb69-4b3a-bb1e-edc07f52b45c)

ê·¸ëƒ¥ í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ placeholder ë¼ê³  ì í˜€ìˆë‹¤. ë¬´ìŠ¨ ëœ»ì´ ìˆì„ê¹Œ ì‹¶ì–´ ê²€ìƒ‰ì•  ë³´ì•˜ë‹¤.
HTMLì˜ placeholder ì†ì„±ì€ ì‚¬ìš©ìê°€ ì–´ë–¤ ê²ƒì„ ì…ë ¥í•´ì•¼ í• ì§€ ì•ˆë‚´í•´ ì£¼ê³  ì…ë ¥í•˜ë©´ ì‚¬ë¼ì§€ëŠ” íŒíŠ¸ë¥¼ í‘œì‹œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì†ì„±ìœ¼ë¡œ ë°‘ì—ì™€ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©ëœë‹¤.

![image](https://github.com/teatree32/writeup/assets/164837312/9dcf8fa8-e109-4fa2-829f-6ae0014156a1)

í•˜ì§€ë§Œ flag íŒŒì¼ì—ëŠ” placeholder ë¼ê³ ë§Œ ì“°ì—¬ìˆì–´ì„œ ì •í™•íˆ ìœ„ì™€ ê°™ì€ ëœ»ì„ ê°€ì§€ëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤.

ì´ì–´ì„œ supermarket íŒŒì¼ì„ ì‚´í´ë³´ì.

![image](https://github.com/teatree32/writeup/assets/164837312/086203cc-d93f-4aeb-a293-e8e870529ad3)

ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ goodbye í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  Supermarket í´ë˜ìŠ¤ë¥¼ ë§Œë“ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë¬´ìŠ¨ ìš©ë„ì¸ì§€ëŠ” ì •í™•íˆ ëª¨ë¥´ê² ì§€ë§Œ index íŒŒì¼ì—ì„œ ìš©í•˜ë ¤ê³  ë§Œë“¤ì–´ì§„ê²ƒ ê°™ë‹¤ê³  ì¶”ì¸¡í•´ë³¸ë‹¤.

ë‹¤ìŒìœ¼ë¡œ styleíŒŒì¼ì„ ì‚´í´ë³´ì.

![image](https://github.com/teatree32/writeup/assets/164837312/1c58b6af-7f4c-444d-9778-b19a86f85d2d)

indexíŒŒì¼ì˜ ìŠ¤íƒ€ì¼ì„ ë‚˜íƒ€ë‚˜ë‚´ëŠ css íŒŒì¼ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.

ì´ì–´ì„œ index íŒŒì¼ì„ ì‚´í´ë³´ì.
![image](https://github.com/teatree32/writeup/assets/164837312/20d0292c-ae48-4fc1-9116-44b6baeb13bb)
![image](https://github.com/teatree32/writeup/assets/164837312/96cf1cc8-092f-43cf-afb8-e021c98bc69a)

ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ supermarke.phpì™€ style.cssê°€ ì—°ê²°ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.



